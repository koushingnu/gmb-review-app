# プロジェクトアーキテクチャガイド

## 概要

このドキュメントでは、プロジェクトのアーキテクチャ設計と各ディレクトリの役割について説明します。

## ディレクトリ構造の基本原則

### 1. 機能ベースの分割（Feature-based Architecture）

- 各機能は `features` ディレクトリ配下に独立したモジュールとして配置
- 機能に関連するすべてのコードを1つの場所にまとめる
- 機能間の依存関係を最小限に抑える

### 2. 共通コンポーネントの管理

- `components` ディレクトリには再利用可能なコンポーネントのみを配置
- 機能固有のコンポーネントは各機能のディレクトリに配置
- コンポーネントは明確な責務を持ち、適切に分類される

### 3. ユーティリティとヘルパー

- グローバルなユーティリティは `lib` ディレクトリに配置
- 機能固有のユーティリティは各機能のディレクトリに配置
- 定数、API関連、共通関数は明確に分類

## 各ディレクトリの役割

### `src/features/`

機能ごとのモジュールを格納するディレクトリ。各機能は以下の構造を持ちます：

```
features/[機能名]/
├── components/   # 機能固有のコンポーネント
├── hooks/        # 機能固有のカスタムフック
├── types/        # 機能固有の型定義
├── utils/        # 機能固有のユーティリティ
└── api/          # 機能固有のAPI関連
```

### `src/components/`

共通コンポーネントを格納するディレクトリ：

```
components/
├── common/       # 基本的なUI要素（Button, Input等）
├── layout/       # レイアウトコンポーネント
└── charts/       # グラフ関連のコンポーネント
```

### `src/lib/`

共通ユーティリティを格納するディレクトリ：

```
lib/
├── constants/    # 定数定義
├── utils/        # ユーティリティ関数
└── api/          # API共通関数
```

### `src/types/`

グローバルな型定義を格納するディレクトリ：

- アプリケーション全体で使用する型定義
- 共通のインターフェース定義
- 外部ライブラリの型定義拡張

## コーディング規約

### 1. ファイル命名規則

- コンポーネント: PascalCase（例: `ReviewCard.tsx`）
- ユーティリティ: camelCase（例: `formatDate.ts`）
- 型定義: PascalCase（例: `ReviewType.ts`）
- テスト: 元ファイル名 + `.test`（例: `ReviewCard.test.tsx`）

### 2. インポート規則

- 相対パスではなく、絶対パスを使用
- インポートの順序を維持（外部 → 内部 → スタイル）
- エイリアスを適切に活用

### 3. コンポーネント設計

- 単一責任の原則に従う
- Props型を明示的に定義
- 適切なエラーハンドリング
- パフォーマンスを考慮した実装

## ベストプラクティス

### 1. 新機能の追加

1. `features` ディレクトリに新しい機能ディレクトリを作成
2. 必要なサブディレクトリを作成
3. 型定義から実装を開始
4. テストを作成

### 2. 共通コンポーネントの作成

1. 再利用性を評価
2. 適切なカテゴリを選択
3. インターフェースを設計
4. ドキュメントを作成

### 3. テスト戦略

- ユニットテスト: 各コンポーネントと関数
- 統合テスト: 機能単位
- E2Eテスト: 重要なユーザーフロー

## 開発フロー

1. 機能要件の理解
2. アーキテクチャの検討
3. 型定義の作成
4. 実装
5. テスト
6. コードレビュー
7. デプロイ

## 変更履歴

| 日付       | 変更内容                                   | 変更者    |
| ---------- | ------------------------------------------ | --------- |
| 2024-03-XX | プロジェクトアーキテクチャガイドの初期作成 | Assistant |
| 2024-03-XX | 変更履歴セクションの追加                   | Assistant |
