# 開発ガイド

## はじめに

このガイドは、プロジェクトの開発に参加する開発者向けのガイドラインです。

## 開発環境のセットアップ

### 必要な環境

- Node.js (v18以上)
- npm または yarn
- Git

### プロジェクトのセットアップ

1. リポジトリのクローン

```bash
git clone [リポジトリURL]
cd gmb-review-app
```

2. 依存関係のインストール

```bash
npm install
# または
yarn install
```

3. 環境変数の設定

- `.env.example` をコピーして `.env.local` を作成
- 必要な環境変数を設定

4. 開発サーバーの起動

```bash
npm run dev
# または
yarn dev
```

## 開発ワークフロー

### 1. 新機能の開発

1. 新しいブランチを作成

```bash
git checkout -b feature/[機能名]
```

2. `features` ディレクトリに新しい機能を追加

```
features/[機能名]/
├── components/
├── hooks/
├── types/
├── utils/
└── api/
```

3. 実装の手順
   - 型定義の作成
   - コンポーネントの実装
   - ユニットテストの作成
   - E2Eテストの作成（必要な場合）

### 2. コードの品質管理

#### リンター・フォーマッター

```bash
# リントチェック
npm run lint

# コードフォーマット
npm run format
```

#### テスト

```bash
# ユニットテスト
npm run test

# E2Eテスト
npm run test:e2e
```

### 3. コミットメッセージの規約

- feat: 新機能
- fix: バグ修正
- docs: ドキュメントのみの変更
- style: コードの意味に影響を与えない変更
- refactor: リファクタリング
- test: テストコード
- chore: ビルドプロセスやツール

例：

```
feat: レビュー一覧の表示機能を追加
fix: レビュー詳細画面のレイアウト崩れを修正
```

## デバッグとトラブルシューティング

### 開発時のデバッグ

1. ブラウザの開発者ツールを使用
2. `console.log` や `debugger` の活用
3. React Developer Tools の利用

### 一般的な問題と解決方法

1. ビルドエラー

   - `node_modules` の削除と再インストール
   - キャッシュのクリア

2. 型エラー

   - 型定義の確認
   - `tsconfig.json` の設定確認

3. パフォーマンス問題

   - React DevTools Profiler の使用
   - 不要なレンダリングの確認

4. クライアントコンポーネントのエラー

   - "use client" ディレクティブの確認
   - Suspenseバウンダリの適切な配置
   - クライアントコンポーネントとサーバーコンポーネントの分離

5. 環境変数の問題

   - クライアントサイドの環境変数には`NEXT_PUBLIC_`プレフィックスが必要
   - 環境変数の存在確認とバリデーション
   - 本番環境とローカル環境での環境変数の一致確認

6. ビルド時の静的生成エラー
   - コンポーネント間の依存関係の確認
   - 必要なインポートの確認
   - プリレンダリング時のデータ要件の確認

## デプロイメント

### 本番環境へのデプロイ

1. 本番用ビルド

```bash
npm run build
```

2. ビルド成果物の確認

```bash
npm run start
```

### デプロイ前のチェックリスト

- [ ] すべてのテストが通過
- [ ] リンターエラーがない
- [ ] 本番用環境変数の確認
- [ ] パフォーマンスチェック
- [ ] セキュリティチェック

## 参考リソース

- [プロジェクトのアーキテクチャガイド](../architecture/project-architecture.md)
- [ディレクトリ構造の変更履歴](../changes/directory-restructure.md)

## 変更履歴

| 日付       | 変更内容                 | 変更者    |
| ---------- | ------------------------ | --------- |
| 2024-03-XX | 開発ガイドの初期作成     | Assistant |
| 2024-03-XX | 変更履歴セクションの追加 | Assistant |
